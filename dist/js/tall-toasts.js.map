{"version":3,"file":"tall-toasts.js","sources":["../../builds/cdn.js","../../resources/js/tall-toasts.js"],"sourcesContent":["import toast from '../resources/js/tall-toasts';\n\ndocument.addEventListener('alpine:initializing', () => {\n  toast(window.Alpine);\n});\n","export default function (Alpine) {\n  Alpine.data('ToastComponent',\n    ($wire) => ({\n      duration: $wire.duration,\n      wireToasts: $wire.entangle('toasts'),\n      toasts: [],\n      pendingToasts: [],\n      pendingRemovals: [],\n      count: 0,\n      loaded: false,\n\n      init () {\n        window.Toast = {\n          component: this,\n\n          make: (message, title, type) => ({ title, message, type }),\n\n          info (message, title = '') {\n            this.component.add(this.make(message, title, 'info'));\n          },\n\n          success (message, title = '') {\n            this.component.add(this.make(message, title, 'success'));\n          },\n\n          warning (message, title = '') {\n            this.component.add(this.make(message, title, 'warning'));\n          },\n\n          danger (message, title = '') {\n            this.component.add(this.make(message, title, 'danger'));\n          }\n        };\n\n        addEventListener('toast', (event) => {\n          this.add(event.detail);\n        });\n\n        this.fetchWireToasts();\n\n        this.$watch('wireToasts', () => {\n          this.fetchWireToasts();\n        });\n\n        setTimeout(() => {\n          this.loaded = true;\n          this.pendingToasts.forEach((toast) => {\n            this.add(toast);\n          });\n          this.pendingToasts = null;\n        }, $wire.loadDelay);\n      },\n\n      fetchWireToasts () {\n        this.wireToasts.forEach((toast) => {\n          this.add(window.Alpine.raw(toast));\n        });\n        if (this.wireToasts.length > 0) {\n          $wire.set('toasts', []);\n        }\n      },\n\n      add (toast) {\n        if (this.loaded !== true) {\n          this.pendingToasts.push(toast);\n\n          return;\n        }\n\n        toast.type ??= 'info';\n        toast.show = 0;\n        toast.index = this.count;\n\n        this.toasts[this.count] = toast;\n\n        this.scheduleRemoval(this.count);\n\n        this.count++;\n      },\n\n      scheduleRemoval (toastIndex) {\n        if (Object.keys(this.pendingRemovals).includes(toastIndex.toString())) {\n          return;\n        }\n\n        this.pendingRemovals[toastIndex] = setTimeout(() => {\n          this.remove(toastIndex);\n        }, this.duration);\n      },\n\n      scheduleRemovalWithOlder (toastIndex = this.count) {\n        for (let i = 0; i <= toastIndex; i++) {\n          this.scheduleRemoval(i);\n        }\n      },\n\n      cancelRemovalWithNewer (toastIndex) {\n        for (let i = this.count - 1; i >= toastIndex; i--) {\n          clearTimeout(this.pendingRemovals[i]);\n          delete this.pendingRemovals[i];\n        }\n      },\n\n      remove (index) {\n        if (this.toasts[index]) {\n          this.toasts[index].show = 0;\n        }\n\n        setTimeout(() => {\n          this.toasts[index] = '';\n          delete this.pendingRemovals[index];\n        }, 500);\n      }\n\n    })\n  );\n}\n"],"names":["document","addEventListener","window","Alpine","data","$wire","duration","wireToasts","entangle","toasts","pendingToasts","pendingRemovals","count","loaded","init","Toast","component","this","make","message","title","type","info","add","success","warning","danger","event","_this","detail","fetchWireToasts","$watch","setTimeout","forEach","toast","loadDelay","_this2","raw","length","set","show","index","scheduleRemoval","push","toastIndex","Object","keys","includes","toString","_this3","remove","scheduleRemovalWithOlder","i","cancelRemovalWithNewer","clearTimeout","_this4"],"mappings":"6GAEAA,SAASC,iBAAiB,uBAAuB,WACzCC,OAAOC,OCFNC,KAAK,kBACV,SAACC,aAAW,CACVC,SAAUD,MAAMC,SAChBC,WAAYF,MAAMG,SAAS,UAC3BC,OAAQ,GACRC,cAAe,GACfC,gBAAiB,GACjBC,MAAO,EACPC,QAAQ,EAERC,+BACEZ,OAAOa,MAAQ,CACbC,UAAWC,KAEXC,KAAM,SAACC,QAASC,MAAOC,YAAU,CAAED,MAAAA,MAAOD,QAAAA,QAASE,KAAAA,OAEnDC,cAAMH,aAASC,6DAAQ,QAChBJ,UAAUO,IAAIN,KAAKC,KAAKC,QAASC,MAAO,UAG/CI,iBAASL,aAASC,6DAAQ,QACnBJ,UAAUO,IAAIN,KAAKC,KAAKC,QAASC,MAAO,aAG/CK,iBAASN,aAASC,6DAAQ,QACnBJ,UAAUO,IAAIN,KAAKC,KAAKC,QAASC,MAAO,aAG/CM,gBAAQP,aAASC,6DAAQ,QAClBJ,UAAUO,IAAIN,KAAKC,KAAKC,QAASC,MAAO,aAIjDnB,iBAAiB,SAAS,SAAC0B,OACzBC,MAAKL,IAAII,MAAME,gBAGZC,uBAEAC,OAAO,cAAc,WACxBH,MAAKE,qBAGPE,YAAW,WACTJ,MAAKf,QAAS,EACde,MAAKlB,cAAcuB,SAAQ,SAACC,OAC1BN,MAAKL,IAAIW,UAEXN,MAAKlB,cAAgB,OACpBL,MAAM8B,YAGXL,gDACOvB,WAAW0B,SAAQ,SAACC,OACvBE,OAAKb,IAAIrB,OAAOC,OAAOkC,IAAIH,WAEzBjB,KAAKV,WAAW+B,OAAS,GAC3BjC,MAAMkC,IAAI,SAAU,KAIxBhB,aAAKW,wBACiB,IAAhBjB,KAAKJ,4BAMTqB,MAAMb,8BAANa,MAAMb,KAAS,QACfa,MAAMM,KAAO,EACbN,MAAMO,MAAQxB,KAAKL,WAEdH,OAAOQ,KAAKL,OAASsB,WAErBQ,gBAAgBzB,KAAKL,YAErBA,cAbEF,cAAciC,KAAKT,QAgB5BQ,yBAAiBE,4BACXC,OAAOC,KAAK7B,KAAKN,iBAAiBoC,SAASH,WAAWI,mBAIrDrC,gBAAgBiC,YAAcZ,YAAW,WAC5CiB,OAAKC,OAAON,cACX3B,KAAKX,YAGV6C,4CAA0BP,kEAAa3B,KAAKL,MACjCwC,EAAI,EAAGA,GAAKR,WAAYQ,SAC1BV,gBAAgBU,IAIzBC,gCAAwBT,gBACjB,IAAIQ,EAAInC,KAAKL,MAAQ,EAAGwC,GAAKR,WAAYQ,IAC5CE,aAAarC,KAAKN,gBAAgByC,WAC3BnC,KAAKN,gBAAgByC,IAIhCF,gBAAQT,uBACFxB,KAAKR,OAAOgC,cACThC,OAAOgC,OAAOD,KAAO,GAG5BR,YAAW,WACTuB,OAAK9C,OAAOgC,OAAS,UACdc,OAAK5C,gBAAgB8B,SAC3B"}